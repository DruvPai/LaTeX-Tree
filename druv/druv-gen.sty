\ProvidesPackage{druv-gen}

%%%%% PACKAGES FOR STY HACKING
\RequirePackage{etoolbox}
\RequirePackage{xparse}
\RequirePackage{xpatch}
\RequirePackage{xstring}

%%%%%%%%% PACKAGES
%%%%% PACKAGE ARGUMENTS
%%% TOGGLES
\newtoggle{druv-gen-beamer} \togglefalse{druv-gen-beamer}
\newtoggle{druv-gen-bib} \togglefalse{druv-gen-bib}
\newtoggle{druv-gen-tikz} \togglefalse{druv-gen-tikz}
%%% OPTIONS
\DeclareOption{beamer}{\toggletrue{druv-gen-beamer}}
\DeclareOption{bib}{\toggletrue{druv-gen-bib}}
\DeclareOption{tikz}{\toggletrue{druv-gen-tikz}}
\ProcessOptions

%%%%% AMS CORE PACKAGES
\RequirePackage{amsmath} % https://ctan.org/pkg/amsmath?lang=en
\RequirePackage{amssymb} % https://ctan.org/pkg/amsfonts?lang=en
\RequirePackage{amsthm} % https://ctan.org/pkg/amsthm?lang=en

%%%%% FONT PACKAGES
\RequirePackage{fontspec}
\RequirePackage{unicode-math}
\newcommand{\hmmax}{0} % https://tex.stackexchange.com/a/243541/189560
\newcommand{\bmmax}{0} % https://tex.stackexchange.com/a/243541/189560
\RequirePackage{lmodern} % https://ctan.org/pkg/lm?lang=en
% \RequirePackage{mlmodern} % https://ctan.org/pkg/lm?lang=en
% \RequirePackage{newtxtext}  % https://ctan.math.washington.edu/tex-archive/fonts/newtx/doc/newtxdoc.pdf
% \RequirePackage[mtpbb, mtpccal, mtpscr]{mtpro2} % https://www.pctex.com/files/managed/1/1b/mtpro2Abbrev.pdf
% \RequirePackage{mathpazo} % https://ctan.org/pkg/mathpazo?lang=en
% \RequirePackage{mathrsfs} % https://tex.stackexchange.com/questions/532897/what-package-should-i-use-for-mathscrc
\setmainfont{TeX Gyre Termes}
%\setmathfont{TeX Gyre Termes Math}
%\setmainfont{TeX Gyre Pagella}
%\setmathfont{TeX Gyre Pagella Math} \setmathfont[range=\mathscr]{XITS Math}
\setsansfont[Scale = 0.9]{TeX Gyre Heros}
\setmonofont{Source Code Pro}
\RequirePackage{silence} % https://ctan.org/pkg/silence?lang=en
\WarningFilter{latexfont}{Font shape}

%%%%% PGF/TIKZ
\iftoggle{druv-gen-tikz}{
	\RequirePackage{tikz} % https://www.overleaf.com/learn/latex/TikZ_package
	\RequirePackage{pgf}
	\RequirePackage{pgfplots} % https://www.overleaf.com/learn/latex/Pgfplots_package
	\pgfplotsset{compat=1.18}
	\RequirePackage{tikz-cd} % https://ctan.math.washington.edu/tex-archive/graphics/pgf/contrib/tikz-cd/tikz-cd-doc.pdf -- need for quiver diagrams
	\RequirePackage[american]{circuitikz} % https://ctan.math.illinois.edu/graphics/pgf/contrib/circuitikz/doc/circuitikzmanual.pdf
	\usetikzlibrary{calc, scopes, hobby}
	\RequirePackage{blox} % https://ctan.org/pkg/blox?lang=en
}{}

%%%%% BIBLIOGRAPHY
\iftoggle{druv-gen-bib}{
	\RequirePackage[round]{natbib} % https://www.overleaf.com/learn/latex/Bibliography_management_with_natbib
	\bibliographystyle{plainnat}
}{}

%%%%% LAYOUT PACKAGES
%%% THEOREMS
\RequirePackage{tcolorbox} % https://mirrors.mit.edu/CTAN/macros/latex/contrib/tcolorbox/tcolorbox.pdf
%%% TEXT LAYOUT
\RequirePackage{multicol} % https://www.overleaf.com/learn/latex/Multiple_columns
%%% IMAGE LAYOUT
\RequirePackage{float} % https://ctan.org/pkg/float?lang=en
%%% ARRAY/TABULAR LAYOUT
\RequirePackage{array} % https://mirrors.rit.edu/CTAN/macros/latex/required/tools/array.pdf
\RequirePackage{multirow} % https://texblog.org/2012/12/21/multi-column-and-multi-row-cells-in-latex-tables/
\RequirePackage{booktabs} % https://ctan.math.illinois.edu/macros/latex/contrib/booktabs/booktabs.pdf
%%% ENUMERATE LAYOUT
\iftoggle{druv-gen-beamer}{}{
	\RequirePackage[shortlabels]{enumitem} % https://ctan.mirrors.hoobly.com/macros/latex/contrib/enumitem/enumitem.pdf
}
%%% FIGURE LAYOUT
\RequirePackage{subcaption} % http://mirrors.ibiblio.org/CTAN/macros/latex/contrib/caption/subcaption.pdf

%%%%% MULTIPLE FILES 
\iftoggle{druv-gen-beamer}{}{
	\RequirePackage{subfiles} % https://www.overleaf.com/learn/latex/Multi-file_LaTeX_projects
}

%%%%% REFERENCES
\iftoggle{druv-gen-beamer}{}{
	\RequirePackage[colorlinks=true]{hyperref} % https://mirrors.concertpass.com/tex-archive/macros/latex/contrib/hyperref/doc/hyperref-doc.pdf
	\hypersetup{urlcolor = violet, linkcolor = blue, citecolor = cyan}
}

%%%%% PAGE BREAK
\iftoggle{druv-gen-beamer}{}{
	\allowdisplaybreaks
}


