\ProvidesPackage{druv-gen}

%%%%%%%%% PACKAGES
%%%%% PACKAGE ARGUMENTS
%%% TOGGLES
\newtoggle{druv-gen-beamer} \togglefalse{druv-gen-beamer}
\newtoggle{druv-gen-bib} \togglefalse{druv-gen-bib}
\newtoggle{druv-gen-tikz} \togglefalse{druv-gen-tikz}
%%% OPTIONS
\DeclareOption{beamer}{\toggletrue{druv-gen-beamer}}
\DeclareOption{bib}{\toggletrue{druv-gen-bib}}
\DeclareOption{tikz}{\toggletrue{druv-gen-tikz}}
\ProcessOptions

%%%%% AMS CORE PACKAGES
\RequirePackage{amsmath} % https://ctan.org/pkg/amsmath?lang=en
\RequirePackage{amssymb} % https://ctan.org/pkg/amsfonts?lang=en

%%%%% FONT PACKAGES
% \RequirePackage{mlmodern} % https://ctan.org/pkg/lm?lang=en
% \RequirePackage{newtxtext}  % https://ctan.math.washington.edu/tex-archive/fonts/newtx/doc/newtxdoc.pdf
% \RequirePackage[mtpbb]{mtpro2} % https://www.pctex.com/files/managed/1/1b/mtpro2Abbrev.pdf
\RequirePackage{mathpazo} % https://ctan.org/pkg/mathpazo?lang=en
\RequirePackage{mathrsfs} % https://tex.stackexchange.com/questions/532897/what-package-should-i-use-for-mathscrc

%%%%% PGF/TIKZ
\iftoggle{druv-gen-tikz}{
  \RequirePackage{tikz} % https://www.overleaf.com/learn/latex/TikZ_package
  \RequirePackage{pgf}
  \RequirePackage{pgfplots} % https://www.overleaf.com/learn/latex/Pgfplots_package
  \RequirePackage{tikz-cd} % https://ctan.math.washington.edu/tex-archive/graphics/pgf/contrib/tikz-cd/tikz-cd-doc.pdf -- need for quiver diagrams
  \RequirePackage[american]{circuitikz} % https://ctan.math.illinois.edu/graphics/pgf/contrib/circuitikz/doc/circuitikzmanual.pdf
}{}

%%%%% BIBLIOGRAPHY
\iftoggle{druv-gen-bib}{
  \RequirePackage[style=numeric, citestyle=numeric-comp, backend=biber]{biblatex} % https://www.overleaf.com/learn/latex/Articles/Getting_started_with_BibLaTeX
}{}

%%%%% LAYOUT PACKAGES
%%% THEOREMS
\RequirePackage{tcolorbox} % https://mirrors.mit.edu/CTAN/macros/latex/contrib/tcolorbox/tcolorbox.pdf
%%% TEXT LAYOUT
\RequirePackage{multicol} % https://www.overleaf.com/learn/latex/Multiple_columns
%%% IMAGE LAYOUT
\RequirePackage{float} % https://ctan.org/pkg/float?lang=en
%%% ARRAY/TABULAR LAYOUT
\RequirePackage{array} % https://mirrors.rit.edu/CTAN/macros/latex/required/tools/array.pdf
\RequirePackage{multirow} % https://texblog.org/2012/12/21/multi-column-and-multi-row-cells-in-latex-tables/
\RequirePackage{booktabs} % https://ctan.math.illinois.edu/macros/latex/contrib/booktabs/booktabs.pdf
%%% ENUMERATE LAYOUT
\iftoggle{druv-gen-beamer}{}{
  \RequirePackage[shortlabels]{enumitem} % https://ctan.mirrors.hoobly.com/macros/latex/contrib/enumitem/enumitem.pdf
}

%%%%% SCIENCE
\RequirePackage{siunitx}

%%%%% MULTIPLE FILES 
\iftoggle{druv-gen-beamer}{}{
  \RequirePackage{subfiles} % https://www.overleaf.com/learn/latex/Multi-file_LaTeX_projects
}

%%%%% REFERENCES
\iftoggle{druv-gen-beamer}{}{
  \RequirePackage[colorlinks=true]{hyperref} % https://mirrors.concertpass.com/tex-archive/macros/latex/contrib/hyperref/doc/hyperref-doc.pdf
  \hypersetup{urlcolor = purple, linkcolor = blue, citecolor = violet}
}

%%%%% PAGE BREAK
\iftoggle{druv-gen-beamer}{}{
  \allowdisplaybreaks
}


%%%%%%%%% MACROS
%%%%% OPERATOR CONSTRUCTS
\NewDocumentCommand{\operatornamemathbb}{m}{\operatorname{\ensuremath{\mathbb{#1}}}}
\NewDocumentCommand{\operatornamemathbf}{m}{\operatorname{\ensuremath{\mathbf{#1}}}}
\NewDocumentCommand{\operatornamemathcal}{m}{\operatorname{\ensuremath{\mathcal{#1}}}}
\NewDocumentCommand{\operatornamemathsf}{m}{\operatorname{\ensuremath{\mathsf{#1}}}}


%%%%% COLOR
\NewDocumentCommand{\ans}{m}{{\color{blue} #1}}

%%%%% DELIMITERS
\RequirePackage{mleftright} % https://tex.stackexchange.com/questions/2607/spacing-around-left-and-right/
%%% FULLY SPACED DELIMITERS
\NewDocumentCommand{\bp}{m}{\left(#1\right)}
\NewDocumentCommand{\bs}{m}{\left[#1\right]}
\NewDocumentCommand{\bc}{m}{\left\{#1\right\}}
\NewDocumentCommand{\ba}{m}{\left\langle#1\right\rangle}
%%% REDUCED-SPACED DELIMITERS
\NewDocumentCommand{\rp}{m}{\mleft(#1\mright)}
\NewDocumentCommand{\rs}{m}{\mleft[#1\mright]}
\NewDocumentCommand{\rc}{m}{\mleft\{#1\mright\}}
\NewDocumentCommand{\ra}{m}{\mleft\langle#1\mright\rangle}


%%%%% FONT SHORTHANDS
\NewDocumentCommand{\bA}{}{\mathbb{A}}
\NewDocumentCommand{\bB}{}{\mathbb{B}}
\NewDocumentCommand{\bC}{}{\mathbb{C}}
\NewDocumentCommand{\bD}{}{\mathbb{D}}
\NewDocumentCommand{\bE}{}{\mathbb{E}}
\NewDocumentCommand{\bF}{}{\mathbb{F}}
\NewDocumentCommand{\bG}{}{\mathbb{G}}
\NewDocumentCommand{\bH}{}{\mathbb{H}}
\NewDocumentCommand{\bI}{}{\mathbb{I}}
\NewDocumentCommand{\bJ}{}{\mathbb{J}}
\NewDocumentCommand{\bK}{}{\mathbb{K}}
\NewDocumentCommand{\bL}{}{\mathbb{L}}
\NewDocumentCommand{\bM}{}{\mathbb{M}}
\NewDocumentCommand{\bN}{}{\mathbb{N}}
\NewDocumentCommand{\bO}{}{\mathbb{O}}
\NewDocumentCommand{\bP}{}{\mathbb{P}}
\NewDocumentCommand{\bQ}{}{\mathbb{Q}}
\NewDocumentCommand{\bR}{}{\mathbb{R}}
\NewDocumentCommand{\bS}{}{\mathbb{S}}
\NewDocumentCommand{\bT}{}{\mathbb{T}}
\NewDocumentCommand{\bU}{}{\mathbb{U}}
\NewDocumentCommand{\bV}{}{\mathbb{V}}
\NewDocumentCommand{\bW}{}{\mathbb{W}}
\NewDocumentCommand{\bX}{}{\mathbb{X}}
\NewDocumentCommand{\bY}{}{\mathbb{Y}}
\NewDocumentCommand{\bZ}{}{\mathbb{Z}}
\NewDocumentCommand{\cA}{}{\mathcal{A}}
\NewDocumentCommand{\cB}{}{\mathcal{B}}
\NewDocumentCommand{\cC}{}{\mathcal{C}}
\NewDocumentCommand{\cD}{}{\mathcal{D}}
\NewDocumentCommand{\cE}{}{\mathcal{E}}
\NewDocumentCommand{\cF}{}{\mathcal{F}}
\NewDocumentCommand{\cG}{}{\mathcal{G}}
\NewDocumentCommand{\cH}{}{\mathcal{H}}
\NewDocumentCommand{\cI}{}{\mathcal{I}}
\NewDocumentCommand{\cJ}{}{\mathcal{J}}
\NewDocumentCommand{\cK}{}{\mathcal{K}}
\NewDocumentCommand{\cL}{}{\mathcal{L}}
\NewDocumentCommand{\cM}{}{\mathcal{M}}
\NewDocumentCommand{\cN}{}{\mathcal{N}}
\NewDocumentCommand{\cO}{}{\mathcal{O}}
\NewDocumentCommand{\cP}{}{\mathcal{P}}
\NewDocumentCommand{\cQ}{}{\mathcal{Q}}
\NewDocumentCommand{\cR}{}{\mathcal{R}}
\NewDocumentCommand{\cS}{}{\mathcal{S}}
\NewDocumentCommand{\cT}{}{\mathcal{T}}
\NewDocumentCommand{\cU}{}{\mathcal{U}}
\NewDocumentCommand{\cV}{}{\mathcal{V}}
\NewDocumentCommand{\cW}{}{\mathcal{W}}
\NewDocumentCommand{\cX}{}{\mathcal{X}}
\NewDocumentCommand{\cY}{}{\mathcal{Y}}
\NewDocumentCommand{\cZ}{}{\mathcal{Z}}
\NewDocumentCommand{\sA}{}{\mathscr{A}}
\NewDocumentCommand{\sB}{}{\mathscr{B}}
\NewDocumentCommand{\sC}{}{\mathscr{C}}
\NewDocumentCommand{\sD}{}{\mathscr{D}}
\NewDocumentCommand{\sE}{}{\mathscr{E}}
\NewDocumentCommand{\sF}{}{\mathscr{F}}
\NewDocumentCommand{\sG}{}{\mathscr{G}}
\NewDocumentCommand{\sH}{}{\mathscr{H}}
\NewDocumentCommand{\sI}{}{\mathscr{I}}
\NewDocumentCommand{\sJ}{}{\mathscr{J}}
\NewDocumentCommand{\sK}{}{\mathscr{K}}
\NewDocumentCommand{\sL}{}{\mathscr{L}}
\NewDocumentCommand{\sM}{}{\mathscr{M}}
\NewDocumentCommand{\sN}{}{\mathscr{N}}
\NewDocumentCommand{\sO}{}{\mathscr{O}}
\NewDocumentCommand{\sP}{}{\mathscr{P}}
\NewDocumentCommand{\sQ}{}{\mathscr{Q}}
\NewDocumentCommand{\sR}{}{\mathscr{R}}
\NewDocumentCommand{\sS}{}{\mathscr{S}}
\NewDocumentCommand{\sT}{}{\mathscr{T}}
\NewDocumentCommand{\sU}{}{\mathscr{U}}
\NewDocumentCommand{\sV}{}{\mathscr{V}}
\NewDocumentCommand{\sW}{}{\mathscr{W}}
\NewDocumentCommand{\sX}{}{\mathscr{X}}
\NewDocumentCommand{\sY}{}{\mathscr{Y}}
\NewDocumentCommand{\sZ}{}{\mathscr{Z}}
\NewDocumentCommand{\fA}{}{\mathfrak{A}}
\NewDocumentCommand{\fB}{}{\mathfrak{B}}
\NewDocumentCommand{\fC}{}{\mathfrak{C}}
\NewDocumentCommand{\fD}{}{\mathfrak{D}}
\NewDocumentCommand{\fE}{}{\mathfrak{E}}
\NewDocumentCommand{\fF}{}{\mathfrak{F}}
\NewDocumentCommand{\fG}{}{\mathfrak{G}}
\NewDocumentCommand{\fH}{}{\mathfrak{H}}
\NewDocumentCommand{\fI}{}{\mathfrak{I}}
\NewDocumentCommand{\fJ}{}{\mathfrak{J}}
\NewDocumentCommand{\fK}{}{\mathfrak{K}}
\NewDocumentCommand{\fL}{}{\mathfrak{L}}
\NewDocumentCommand{\fM}{}{\mathfrak{M}}
\NewDocumentCommand{\fN}{}{\mathfrak{N}}
\NewDocumentCommand{\fO}{}{\mathfrak{O}}
\NewDocumentCommand{\fP}{}{\mathfrak{P}}
\NewDocumentCommand{\fQ}{}{\mathfrak{Q}}
\NewDocumentCommand{\fR}{}{\mathfrak{R}}
\NewDocumentCommand{\fS}{}{\mathfrak{S}}
\NewDocumentCommand{\fT}{}{\mathfrak{T}}
\NewDocumentCommand{\fU}{}{\mathfrak{U}}
\NewDocumentCommand{\fV}{}{\mathfrak{V}}
\NewDocumentCommand{\fW}{}{\mathfrak{W}}
\NewDocumentCommand{\fX}{}{\mathfrak{X}}
\NewDocumentCommand{\fY}{}{\mathfrak{Y}}
\NewDocumentCommand{\fZ}{}{\mathfrak{Z}}
\NewDocumentCommand{\fa}{}{\mathfrak{a}}
\NewDocumentCommand{\fb}{}{\mathfrak{b}}
\NewDocumentCommand{\fc}{}{\mathfrak{c}}
\NewDocumentCommand{\fd}{}{\mathfrak{d}}
\NewDocumentCommand{\fe}{}{\mathfrak{e}}
\NewDocumentCommand{\ff}{}{\mathfrak{f}}
\NewDocumentCommand{\fg}{}{\mathfrak{g}}
\NewDocumentCommand{\fh}{}{\mathfrak{h}}
\NewDocumentCommand{\fri}{}{\mathfrak{i}}
\NewDocumentCommand{\fj}{}{\mathfrak{j}}
\NewDocumentCommand{\fk}{}{\mathfrak{k}}
\NewDocumentCommand{\fl}{}{\mathfrak{l}}
\NewDocumentCommand{\fm}{}{\mathfrak{m}}
\NewDocumentCommand{\fn}{}{\mathfrak{n}}
\NewDocumentCommand{\fo}{}{\mathfrak{o}}
\NewDocumentCommand{\fp}{}{\mathfrak{p}}
\NewDocumentCommand{\fq}{}{\mathfrak{q}}
\NewDocumentCommand{\fr}{}{\mathfrak{r}}
\NewDocumentCommand{\fs}{}{\mathfrak{s}}
\NewDocumentCommand{\ft}{}{\mathfrak{t}}
\NewDocumentCommand{\fu}{}{\mathfrak{u}}
\NewDocumentCommand{\fv}{}{\mathfrak{v}}
\NewDocumentCommand{\fw}{}{\mathfrak{w}}
\NewDocumentCommand{\fx}{}{\mathfrak{x}}
\NewDocumentCommand{\fy}{}{\mathfrak{y}}
\NewDocumentCommand{\fz}{}{\mathfrak{z}}

%%%%% COMMON TEXT SHORTHANDS
\NewDocumentCommand{\vocab}{m}{\textbf{#1}}
\NewDocumentCommand{\st}{}{^{\textnormal{st}}}
\NewDocumentCommand{\nd}{}{^{\textnormal{nd}}}
\NewDocumentCommand{\rd}{}{^{\textnormal{rd}}}
\RenewDocumentCommand{\th}{}{^{\textnormal{th}}}

%%%%% COMMON MATH MODE SHORTHANDS
\RequirePackage{centernot} % http://mirrors.ctan.org/macros/latex/contrib/oberdiek/centernot.pdf
\NewDocumentCommand{\ol}{m}{\overline{#1}}
\NewDocumentCommand{\ul}{m}{\underline{#1}}
\NewDocumentCommand{\wt}{m}{\widetilde{#1}}
\NewDocumentCommand{\wh}{m}{\widehat{#1}}
\NewDocumentCommand{\ob}{mm}{\overbrace{#1}^{#2}}
\NewDocumentCommand{\ub}{mm}{\underbrace{#1}_{#2}}

%%%%% COMMON EQUATION SHORTHANDS
\NewDocumentCommand{\casework}{m}{\begin{cases}#1\end{cases}}
\NewDocumentCommand{\numberthis}{}{\addtocounter{equation}{1}\tag{\theequation}} % used when we have unnumbered equation*/align* and want to give a number to a particular line.
\NewDocumentCommand{\qq}{m}{\quad\textnormal{#1}\quad}
\NewDocumentCommand{\qm}{m}{\quad\ensuremath{#1}\quad}
\NewDocumentCommand{\qc}{}{, \quad}
\NewDocumentCommand{\qqq}{m}{\qquad\textnormal{#1}\qquad}
\NewDocumentCommand{\qqm}{m}{\qquad\ensuremath{#1}\qquad}
\NewDocumentCommand{\qqc}{}{, \qquad}

%%%%% TRIGONOMETRY
\RenewDocumentCommand{\sin}{m}{\operatorname{sin}\rp{#1}}
\RenewDocumentCommand{\cos}{m}{\operatorname{cos}\rp{#1}}
\RenewDocumentCommand{\tan}{m}{\operatorname{tan}\rp{#1}}
\RenewDocumentCommand{\csc}{m}{\operatorname{csc}\rp{#1}}
\RenewDocumentCommand{\sec}{m}{\operatorname{sec}\rp{#1}}
\RenewDocumentCommand{\cot}{m}{\operatorname{cot}\rp{#1}}
\RenewDocumentCommand{\sinh}{m}{\operatorname{sinh}\rp{#1}}
\RenewDocumentCommand{\cosh}{m}{\operatorname{cosh}\rp{#1}}
\RenewDocumentCommand{\tanh}{m}{\operatorname{tanh}\rp{#1}}
\NewDocumentCommand{\csch}{m}{\operatorname{csch}\rp{#1}}
\NewDocumentCommand{\sech}{m}{\operatorname{sech}\rp{#1}}
\RenewDocumentCommand{\coth}{m}{\operatorname{coth}\rp{#1}}
\RenewDocumentCommand{\arcsin}{m}{\operatorname{sin}^{-1}\rp{#1}}
\RenewDocumentCommand{\arccos}{m}{\operatorname{cos}^{-1}\rp{#1}}
\RenewDocumentCommand{\arctan}{m}{\operatorname{tan}^{-1}\rp{#1}}
\NewDocumentCommand{\arccsc}{m}{\operatorname{csc}^{-1}\rp{#1}}
\NewDocumentCommand{\arcsec}{m}{\operatorname{sec}^{-1}\rp{#1}}
\NewDocumentCommand{\arccot}{m}{\operatorname{cot}^{-1}\rp{#1}}
\NewDocumentCommand{\arcsinh}{m}{\operatorname{sinh}^{-1}\rp{#1}}
\NewDocumentCommand{\arccosh}{m}{\operatorname{cosh}^{-1}\rp{#1}}
\NewDocumentCommand{\arctanh}{m}{\operatorname{tanh}^{-1}{\rp#1}}
\NewDocumentCommand{\arccsch}{m}{\operatorname{csch}^{-1}\rp{#1}}
\NewDocumentCommand{\arcsech}{m}{\operatorname{sech}^{-1}\rp{#1}}
\NewDocumentCommand{\arccoth}{m}{\operatorname{coth}^{-1}\rp{#1}}

%%%%% REAL ANALYSIS
%%% REAL ANALYSIS CONSTRUCTS
\RequirePackage{derivative} % http://mirrors.ctan.org/macros/latex/contrib/derivative/derivative.pdf
\RequirePackage{esint} % https://ctan.math.illinois.edu/macros/latex/contrib/esint/esint-doc.pdf
\RequirePackage{interval} % https://ctan.math.illinois.edu/macros/latex/contrib/interval/interval.pdf
\intervalconfig{soft open fences} % for open intervals, use () instead of ][
\xpatchcmd{\interval}{interval,}{interval,scaled,}{}{} % auto-scales intervals
\NewDocumentCommand{\eps}{}{\varepsilon}
\NewDocumentCommand{\vphi}{}{\varphi}
\NewDocumentCommand{\abs}{m}{\left|#1\right|}
\NewDocumentCommand{\norm}{m}{\left\Vert#1\right\Vert}
\NewDocumentCommand{\ip}{mm}{\ba{#1, #2}}
\NewDocumentCommand{\ipip}{m}{\ip{#1}{#1}} % Repeats the first argument in e.g. Hilbert spaces as a replacement for norm.
\NewDocumentCommand{\eval}{m}{\bs{#1}}
\newcommand\restr[2]{{\left.#1\right|_{#2}}} 
% https://tex.stackexchange.com/questions/22252/how-to-typeset-function-restrictions

\NewDocumentCommand{\dist}{O{}O{}m}{\operatorname{dist}_{#1}^{#2}\rp{#3}}
\DeclareMathOperator*{\esssup}{ess\ sup}
\DeclareMathOperator*{\essinf}{ess\ inf}
\NewDocumentCommand{\TV}{}{\mathrm{TV}}
%%% REAAL ANALYSIS SPACES
\NewDocumentCommand{\BV}{O{}m}{\operatornamemathsf{BV}_{#1}\rp{#2}}  % Bounded variation
\NewDocumentCommand{\BMO}{O{}m}{\operatornamemathsf{BMO}_{#1}\rp{#2}}  % Bounded mean oscillation
\NewDocumentCommand{\ISF}{O{}m}{\operatornamemathsf{ISF}_{#1}\rp{#2}}  % Integrable simple functions
\RenewDocumentCommand{\L}{}{\operatornamemathsf{L}}  % p-Integrable functions
\NewDocumentCommand{\C}{}{\operatornamemathsf{C}}  % Continuously differentiable functions
\NewDocumentCommand{\V}{}{\operatornamemathsf{V}}  % Convex functions
\NewDocumentCommand{\W}{}{\operatornamemathsf{W}}  % Sobolev spaces
\NewDocumentCommand{\loc}{}{\mathrm{loc}}  % Local
\NewDocumentCommand{\op}{}{\mathrm{op}}  % Operator

%%%%% COMPLEX ANALYSIS
\NewDocumentCommand{\e}{}{\mathrm{e}}
\RenewDocumentCommand{\i}{}{\mathrm{i}}
\RenewDocumentCommand{\Re}{m}{\operatorname{Re}\rp{#1}}
\RenewDocumentCommand{\Im}{m}{\operatorname{Im}\rp{#1}}
\RenewDocumentCommand{\exp}{m}{\operatorname{exp}\rp{#1}}
\RenewDocumentCommand{\log}{O{}m}{\operatorname{log}_{#1}\rp{#2}}
\NewDocumentCommand{\res}{O{}m}{\operatorname{Res}_{#1}\rp{#2}}

%%%%% DISCRETE MATH, COMBINATORICS, AND ALGORITHMS
%%% DISCRETE MATH
\DeclareMathOperator*{\argmin}{arg\ min}
\DeclareMathOperator*{\argmax}{arg\ max}
\NewDocumentCommand{\floor}{m}{\left\lfloor#1\right\rfloor}
\NewDocumentCommand{\ceiling}{m}{\left\lceil#1\right\rceil}
\RenewDocumentCommand{\gcd}{m}{\operatorname{gcd}\rp{#1}}
\NewDocumentCommand{\lcm}{m}{\operatorname{lcm}\rp{#1}}
%%% COMBINATORICS
\RenewDocumentCommand{\deg}{O{}m}{\operatorname{deg}_{#1}\rp{#2}}
\NewDocumentCommand{\diam}{O{}m}{\operatorname{diam}_{#1}\rp{#2}}
\NewDocumentCommand{\area}{O{}m}{\operatorname{area}_{#1}\rp{#2}}
\NewDocumentCommand{\volume}{O{}m}{\operatorname{volume}_{#1}\rp{#2}}
\NewDocumentCommand{\sign}{m}{\operatorname{sign}\rp{#1}}
%%% PROGRAMMING
\RequirePackage{minted} % https://www.overleaf.com/learn/latex/Code_Highlighting_with_minted
%%% ALGORITHMS
\RequirePackage{algpseudocodex} % http://mirrors.ctan.org/macros/latex/contrib/algpseudocodex/documentation.pdf -- remember to use minipage to get correct indent
\algrenewcommand\algorithmicrequire{\textbf{Input:}} % Remaps \Require to Input`
\algrenewcommand\algorithmicensure{\textbf{Output:}} % Remaps \Ensure to Output
\NewDocumentCommand{\p}{}{\textsf{P}}
\NewDocumentCommand{\np}{}{\textsf{NP}}
\NewDocumentCommand{\bqp}{}{\textsf{BQP}}
\NewDocumentCommand{\opt}{}{\textsf{OPT}}
\NewDocumentCommand{\tm}{}{\textsf{TM}}

%%%%% ABSTRACT ALGEBRA
\NewDocumentCommand{\ord}{m}{\operatorname{ord}\rp{#1}}
\NewDocumentCommand{\Hom}{m}{\operatornamemathsf{Hom}\rp{#1}}
\NewDocumentCommand{\Endo}{m}{\operatornamemathsf{End}\rp{#1}}
\NewDocumentCommand{\Gal}{m}{\operatornamemathsf{Gal}\rp{#1}}
\NewDocumentCommand{\Spec}{m}{\operatornamemathsf{Spec}\rp{#1}}

%%%%% LINEAR ALGEBRA
\RequirePackage{bm} % http://mirrors.ctan.org/macros/latex/required/tools/bm.pdf
%%% COMPUTATIONAL LINEAR ALGEBRA
\NewDocumentCommand{\mat}{m}{\begin{bmatrix}#1\end{bmatrix}}
\NewDocumentCommand{\tr}{m}{\operatorname{tr}\rp{#1}}
\RenewDocumentCommand{\det}{m}{\operatorname{det}\rp{#1}}
\NewDocumentCommand{\proj}{O{}O{}m}{\operatorname*{proj}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\diag}{m}{\operatorname{diag}\rp{#1}}
\NewDocumentCommand{\logdet}{m}{\operatorname{log\ det}\rp{#1}}
\NewDocumentCommand{\Col}{m}{\operatornamemathsf{Col}\rp{#1}}
\NewDocumentCommand{\Row}{m}{\operatornamemathsf{Row}\rp{#1}}
\NewDocumentCommand{\Null}{m}{\operatornamemathsf{Null}\rp{#1}}
%%% ABSTRACT LINEAR ALGEBRA
\NewDocumentCommand{\Ker}{m}{\operatornamemathsf{Ker}\rp{#1}}
\RenewDocumentCommand{\Im}{m}{\operatornamemathsf{Im}\rp{#1}}
\NewDocumentCommand{\Span}{m}{\operatornamemathsf{Span}\rp{#1}}
\NewDocumentCommand{\Supp}{m}{\operatornamemathsf{Supp}\rp{#1}}
\RenewDocumentCommand{\dim}{m}{\operatorname{dim}{\rp#1}}
\NewDocumentCommand{\codim}{m}{\operatorname{codim}\rp{#1}}
\NewDocumentCommand{\rank}{m}{\operatorname{rank}\rp{#1}}
%%% LINEAR ALGEBRAIC SPACES
\NewDocumentCommand{\GL}{m}{\operatornamemathsf{GL}\rp{#1}}
\NewDocumentCommand{\SL}{m}{\operatornamemathsf{SL}\rp{#1}}
\RenewDocumentCommand{\O}{m}{\operatornamemathsf{O}\rp{#1}}
\NewDocumentCommand{\SO}{m}{\operatornamemathsf{SO}\rp{#1}}
\NewDocumentCommand{\U}{m}{\operatornamemathsf{U}\rp{#1}}
\NewDocumentCommand{\SU}{m}{\operatornamemathsf{SU}\rp{#1}}
\NewDocumentCommand{\Sym}{m}{\operatornamemathsf{Sym}\rp{#1}}
\NewDocumentCommand{\Herm}{m}{\operatornamemathsf{Herm}\rp{#1}}
\NewDocumentCommand{\PSD}{m}{\operatornamemathsf{PSD}\rp{#1}}
\NewDocumentCommand{\PD}{m}{\operatornamemathsf{PD}\rp{#1}}

%%%%% TOPOLOGY
%%% TOPOLOGICAL CONSTRUCTS
\NewDocumentCommand{\id}{}{\operatorname{id}}
\NewDocumentCommand{\Cl}{O{}O{}m}{\operatornamemathsf{Cl}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\Int}{O{}O{}m}{\operatornamemathsf{Int}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\Ext}{O{}O{}m}{\operatornamemathsf{Ext}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\Bd}{O{}O{}m}{\operatornamemathsf{Bd}_{#1}^{#2}\rp{#3}}
%%% TOPOLOGICAL SPACES
\NewDocumentCommand{\Ball}{}{\bB}
\NewDocumentCommand{\Sphere}{}{\bS}
\NewDocumentCommand{\Torus}{}{\bT}
\NewDocumentCommand{\RP}{}{\bR\bP}
\NewDocumentCommand{\CP}{}{\bC\bP}

%%%%% PROBABILITY
%%% BASIC QUANTITIES
\NewDocumentCommand{\given}{}{\;\ifnumequal{\currentgrouptype}{16}{\middle|}{\mid}\;}
% https://tex.stackexchange.com/questions/54052/applying-middle-outside-of-a-left-right-group
\NewDocumentCommand{\suchthat}{}{\given}

\RenewDocumentCommand{\Pr}{O{}O{}m}{\operatornamemathbf{P}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\Ex}{O{}O{}m}{\operatornamemathbf{E}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\Cov}{O{}O{}m}{\operatorname{Cov}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\Var}{O{}O{}m}{\operatorname{Var}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\Corr}{O{}O{}m}{\operatorname{Corr}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\Lin}{O{}O{}m}{\operatornamemathbf{L}_{#1}^{#2}\rp{#3}}
\NewDocumentCommand{\indvar}{O{}m}{\mathbf{1}_{#1}\rp{#2}}
\NewDocumentCommand{\iid}{}{\mathrm{i.i.d.}}
\NewDocumentCommand{\ind}{}{\perp \!\!\! \perp}
%%% PROBABILITY DISTRIBUTIONS
% DISCRETE DISTRIBUTIONS
\NewDocumentCommand{\dBern}{m}{\operatorname{Bernoulli}\rp{#1}}
\NewDocumentCommand{\dRad}{m}{\operatorname{Rademacher}\rp{#1}}
\NewDocumentCommand{\dBin}{m}{\operatorname{Bin}\rp{#1}}
\NewDocumentCommand{\dGeo}{m}{\operatorname{Geo}\rp{#1}}
\NewDocumentCommand{\dUnif}{m}{\operatornamemathcal{U}\rp{#1}}
\NewDocumentCommand{\dPois}{m}{\operatorname{Pois}\rp{#1}}
% CONTINUOUS DISTRIBUTIONS
\NewDocumentCommand{\dNorm}{m}{\operatornamemathcal{N}\rp{#1}}
\NewDocumentCommand{\dExp}{m}{\operatorname{Exp}\rp{#1}}
\NewDocumentCommand{\dErl}{m}{\operatorname{Erlang}\rp{#1}}
\NewDocumentCommand{\dGamma}{m}{\operatorname{Gamma}\rp{#1}}
\NewDocumentCommand{\dBeta}{m}{\operatorname{Beta}\rp{#1}}
\NewDocumentCommand{\dLaplace}{m}{\operatorname{Laplace}\rp{#1}}

%%%%% NUMERICS
\NewDocumentCommand{\float}{m}{\operatorname{\texttt{fl}}\rp{#1}}
\NewDocumentCommand{\alg}{m}{\operatorname{\texttt{alg}}\rp{#1}}
\NewDocumentCommand{\round}{m}{\operatorname{\texttt{round}}\rp{#1}}
\NewDocumentCommand{\RRE}{m}{\operatorname{\texttt{RRE}}\rp{#1}}

%%%%% ANNOYING NAMES
\NewDocumentCommand{\Holder}{}{H\"{o}lder}
\NewDocumentCommand{\Levy}{}{L\'evy}
\NewDocumentCommand{\Ito}{}{It\^{o}}
\NewDocumentCommand{\Caratheodory}{}{Carath\'eodory}
\NewDocumentCommand{\Erdos}{}{Erd\"{o}s}
\NewDocumentCommand{\Renyi}{}{R\'enyi}
\NewDocumentCommand{\Frechet}{}{Fr\'echet}
