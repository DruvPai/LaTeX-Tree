\ProvidesPackage{druv-thms}
\usepackage{druv-pkg}


% THEOREM STYLES AND SETUP
\AtBeginDocument {
    \setlength{\belowdisplayskip}{0.5em}
    \setlength{\belowdisplayshortskip}{0.2em}
    \setlength{\abovedisplayskip}{0.5em}
    \setlength{\abovedisplayshortskip}{0.2em}
}

\mdfsetup{
    roundcorner = 1pt,
    hidealllines = true,
    innertopmargin = 0.6em,
    innerbottommargin = 1em,
}

\newenvironment{solution}{\begin{proof}[Solution]}{\end{proof}}



\newcommand{\thmboxstyle}[4]{
    \mdfdefinestyle{#2}{
	linecolor = #3,
	backgroundcolor = #4,
    }
    \declaretheoremstyle[
    headfont = \bfseries\color{#3},
    notefont = \bfseries\color{#3},
    mdframed = {style = #2},
    headpunct = {\\[0.4pt]},
    postheadspace = {0pt}
    ]{#1}
}


\thmboxstyle{graybox}{mdgraybox}{grayforeground}{graybackground}
\thmboxstyle{theorembox}{mdbluebox}{blue}{blue!7}
\thmboxstyle{lemmabox}{mdgreenbox}{green!50!black}{green!7}

\declaretheoremstyle[
headfont = \bfseries,
notefont = \bfseries,
bodyfont = \normalfont
]{plain}

\newcommand{\boxhack}{~\vspace{-2em}}

\declaretheorem[style = plain, name = Theorem]{theorem}
\declaretheorem[style = plain, name = Theorem, numbered = no]{theorem*}
\declaretheorem[style = plain, name = Lemma, sibling = theorem]{lemma}
\declaretheorem[style = plain, name = Lemma, numbered = no]{lemma*}

\declaretheorem[style = plain, name = Corollary, sibling = theorem]{corollary}
\declaretheorem[style = plain, name = Corollary, numbered = no]{corollary*}
\declaretheorem[style = plain, name = Case, sibling = theorem]{case}
\declaretheorem[style = plain, name = Case, numbered = no]{case*}
\declaretheorem[style = plain, name = Claim, sibling = theorem]{claim}
\declaretheorem[style = plain, name = Claim, numbered = no]{claim*}
\declaretheorem[style = plain, name = Definition, sibling = theorem]{definition}
\declaretheorem[style = plain, name = Definition, numbered = no]{definition*}
\declaretheorem[style = plain, name = Problem, sibling = theorem]{problem}
\declaretheorem[style = plain, name = Problem, numbered = no]{problem*}
\declaretheorem[style = plain, name = Proposition, sibling = theorem]{proposition}
\declaretheorem[style = plain, name = Proposition, numbered = no]{proposition*}

\declaretheorem[style = plain, name = Algorithm, sibling = theorem]{algo}
\declaretheorem[style = plain, name = Algorithm, numbered = no]{algo*}
\declaretheorem[style = plain, name = Code Snippet, sibling = theorem]{code}
\declaretheorem[style = plain, name = Code Snippet, numbered = no]{code*}
\declaretheorem[style = plain, name = Conjecture, sibling = theorem]{conjecture}
\declaretheorem[style = plain, name = Conjecture, numbered = no]{conjecture*}
\declaretheorem[style = plain, name = Example, sibling = theorem]{example}
\declaretheorem[style = plain, name = Example, numbered = no]{example*}
\declaretheorem[style = plain, name = Exercise, sibling = theorem]{exercise}
\declaretheorem[style = plain, name = Exercise, numbered = no]{exercise*}
\declaretheorem[style = plain, name = Fact, sibling = theorem]{fact}
\declaretheorem[style = plain, name = Fact, numbered = no]{fact*}
\declaretheorem[style = plain, name = Question, sibling = theorem]{question}
\declaretheorem[style = plain, name = Question, numbered = no]{question*}
\declaretheorem[style = plain, name = Remark, sibling = theorem]{remark}
\declaretheorem[style = plain, name = Remark, numbered = no]{remark*}

\declaretheoremstyle[
headfont = \itshape,
notefont = \itshape,
bodyfont = \normalfont,
]{smallplain}

\declaretheoremstyle[
headfont = \itshape,
notefont = \itshape,
bodyfont = \normalfont,
prefoothook = \hfill $\blacksquare$,
]{smallplainproof}

\declaretheorem[style = smallplain, name = Case, numbered = no]{smallcase}
\declaretheorem[style = smallplain, name = Claim, numbered = no]{smallclaim}
\declaretheorem[style = smallplain, name = Lemma, numbered = no]{smalllemma}
\declaretheorem[style = smallplainproof, name = Proof, numbered = no]{smallproof}


\renewcommand{\fancyrefdefaultformat}{plain}

\newcommand*{\fancyrefthmlabelprefix}{thm}
\newcommand*{\frefthmname}{theorem}
\newcommand*{\Frefthmname}{Theorem}
\frefformat{plain}{\fancyrefthmlabelprefix}{\frefthmname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefthmlabelprefix}{\Frefthmname\fancyrefdefaultspacing#1}

\newcommand*{\fancyreflemlabelprefix}{lem}
\newcommand*{\freflemname}{lemma}
\newcommand*{\Freflemname}{Lemma}
\frefformat{plain}{\fancyreflemlabelprefix}{\freflemname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyreflemlabelprefix}{\Freflemname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefcorlabelprefix}{cor}
\newcommand*{\frefcorname}{corollary}
\newcommand*{\Frefcorname}{Corollary}
\frefformat{plain}{\fancyrefcorlabelprefix}{\frefcorname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefcorlabelprefix}{\Frefcorname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefcaselabelprefix}{case}
\newcommand*{\frefcasename}{case}
\newcommand*{\Frefcasename}{Case}
\frefformat{plain}{\fancyrefcaselabelprefix}{\frefcasename\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefcaselabelprefix}{\Frefcasename\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefclmlabelprefix}{clm}
\newcommand*{\frefclmname}{claim}
\newcommand*{\Frefclmname}{Claim}
\frefformat{plain}{\fancyrefclmlabelprefix}{\frefclmname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefclmlabelprefix}{\Frefclmname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefdeflabelprefix}{def}
\newcommand*{\frefdefname}{definition}
\newcommand*{\Frefdefname}{Definition}
\frefformat{plain}{\fancyrefdeflabelprefix}{\frefdefname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefdeflabelprefix}{\Frefdefname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefproblabelprefix}{prob}
\newcommand*{\frefprobname}{problem}
\newcommand*{\Frefprobname}{Problem}
\frefformat{plain}{\fancyrefproblabelprefix}{\frefprobname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefproblabelprefix}{\Frefprobname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefproplabelprefix}{prop}
\newcommand*{\frefpropname}{proposition}
\newcommand*{\Frefpropname}{Proposition}
\frefformat{plain}{\fancyrefproplabelprefix}{\frefpropname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefproplabelprefix}{\Frefpropname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefalglabelprefix}{alg}
\newcommand*{\frefalgname}{algorithm}
\newcommand*{\Frefalgname}{Algorithm}
\frefformat{plain}{\fancyrefalglabelprefix}{\frefalgname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefalglabelprefix}{\Frefalgname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefconjlabelprefix}{conj}
\newcommand*{\frefconjname}{conjecture}
\newcommand*{\Frefconjname}{Conjecture}
\frefformat{plain}{\fancyrefconjlabelprefix}{\frefconjname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefconjlabelprefix}{\Frefconjname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefexlabelprefix}{ex}
\newcommand*{\frefexname}{example}
\newcommand*{\Frefexname}{Example}
\frefformat{plain}{\fancyrefexlabelprefix}{\frefexname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefexlabelprefix}{\Frefexname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefexerlabelprefix}{exer}
\newcommand*{\frefexername}{exercise}
\newcommand*{\Frefexername}{Exercise}
\frefformat{plain}{\fancyrefexerlabelprefix}{\frefexername\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefexerlabelprefix}{\Frefexername\fancyrefdefaultspacing#1}

\newcommand*{\fancyreffactlabelprefix}{fact}
\newcommand*{\freffactname}{fact}
\newcommand*{\Freffactname}{Fact}
\frefformat{plain}{\fancyreffactlabelprefix}{\freffactname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyreffactlabelprefix}{\Freffactname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefqueslabelprefix}{ques}
\newcommand*{\frefquesname}{question}
\newcommand*{\Frefquesname}{Question}
\frefformat{plain}{\fancyrefqueslabelprefix}{\frefquesname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefqueslabelprefix}{\Frefquesname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefrmklabelprefix}{rmk}
\newcommand*{\frefrmkname}{remark}
\newcommand*{\Frefrmkname}{Remark}
\frefformat{plain}{\fancyrefrmklabelprefix}{\frefrmkname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefrmklabelprefix}{\Frefrmkname\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefcodelabelprefix}{code}
\newcommand*{\frefcodename}{code snippet}
\newcommand*{\Frefcodename}{Code Snippet}
\frefformat{plain}{\fancyrefcodelabelprefix}{\frefcodename\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefcodelabelprefix}{\Frefcodename\fancyrefdefaultspacing#1}

\newcommand*{\fancyrefpartlabelprefix}{part}
\newcommand*{\frefpartname}{part}
\newcommand*{\Frefpartname}{Part}
\frefformat{plain}{\fancyrefpartlabelprefix}{\frefpartname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefpartlabelprefix}{\Frefpartname\fancyrefdefaultspacing#1}
